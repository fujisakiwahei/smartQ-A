# AIロジック詳細定義書

## 1. モデル構成
- エンジン: Gemini 3.0 Flash
- 分類タスク: 最速レスポンス重視設定 (thinking_level: minimal)
- 生成タスク: 論理的整合性重視設定 (thinking_level: low)

## 2. 処理フロー詳細

ステップ1：インテント判定（カテゴリ特定）
- 入力：ユーザーの質問 ＋ 全カテゴリ名 ＋ カテゴリ説明（各350文字）
- 処理：Gemini 3.0 Flash を使用し、質問がどのカテゴリに属するかを特定。
- 出力：該当するカテゴリIDを抽出。

ステップ2：知識抽出
- 処理：ステップ1で得たカテゴリIDをキーに、Firestoreから該当するQ&Aリストのみを取得。

ステップ3：根拠に基づいた回答生成
- 入力：抽出されたQ&Aリスト ＋ ユーザーの質問
- 処理：AIに「提供された知識のみを絶対の正解として使い、それ以外は推測せず、分からないと答える」という強力な制約を課して回答を生成。
- 出力：ユーザーへの最終回答テキスト。
